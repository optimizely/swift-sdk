name: Swift

on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]

jobs:
  lint_markdown_files:
    uses: optimizely/swift-sdk/.github/workflows/lint_markdown.yml@yasir/gitAction

  integration_tests:
    uses: optimizely/swift-sdk/.github/workflows/integration_test.yml@yasir/gitAction
    secrets:
      CI_USER_TOKEN: ${{ secrets.CI_USER_TOKEN }}
      TRAVIS_COM_TOKEN: ${{ secrets.TRAVIS_COM_TOKEN }}

  fullstack_production_suite:
    uses: optimizely/swift-sdk/.github/workflows/integration_test.yml@yasir/gitAction
    with:
      FULLSTACK_TEST_REPO: ProdTesting
    secrets:
      CI_USER_TOKEN: ${{ secrets.CI_USER_TOKEN }}
      TRAVIS_COM_TOKEN: ${{ secrets.TRAVIS_COM_TOKEN }}

  lint: 
    runs-on: macos-latest
    steps:
    - uses: maxim-lobanov/setup-xcode@v1
      with:
        xcode-version: latest-stable
      run: |
        gem install cocoapods -v '1.9.3'
        pod spec lint --quick
        curl -sSL https://download.sourceclear.com/ci.sh | bash
      
  # build:

  #   runs-on: macos-latest

  #   steps:
  #   - uses: actions/checkout@v3
  #   - name: Build
  #     run: swift build -v
  #   - name: Run tests
  #     run: swift test -v
